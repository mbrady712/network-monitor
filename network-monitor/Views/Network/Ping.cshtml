@page

@{
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Ping an IP Address</h2>

<form method="post" action="/Network/PingResult" id="pingForm">
    <div>
        <label for="ipAddress">IP Address:</label>
        <input type="text" id="ipAddress" name="ipAddress" required />
    </div>
    <button type="submit">Ping</button>
</form>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>

    // Handle form submission for the ping action
    $('#pingForm').submit(function(event) {

		const ipAddressInput = $('#ipAddress').val();

        // Regex for IPv4 and IPv6 validation
        const ipRegex = /^(([0-9]{1,3}\.){3}[0-9]{1,3})$/;

        if (!ipRegex.test(ipAddressInput)) {
            alert('Please enter a valid IPv4 address.');
            event.preventDefault();
        }
    });

    // Load ping history when the page loads
    $(document).ready(function() {
        loadPingHistory();
    });
</script>